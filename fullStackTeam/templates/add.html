{% extends "master.html" %}

{% block title %}Add a team member{% endblock %}

{% block content %}
    <h1>Add a team member</h1>
    <div class="subtitle">Set first name, last name, email, phone number, and role.</div>

    <form method="POST">
        {% csrf_token %}
        <h3>Info</h3>
        <input type="text" name="first_name" placeholder="First name" required>
        <input type="text" name="last_name" placeholder="Last name" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="tel" name="phone" id="phone" placeholder="(XXX) XXX-XXXX" required 
            pattern="\(\d{3}\)\s\d{3}-\d{4}" 
            oninput="formatPhoneNumber(this)">

        <h3>Role</h3>
        <div class="role-selector">
            <label class="role-option">
                <input type="radio" name="role" value="Regular" checked>
                Regular - Can't delete members
            </label>
            <label class="role-option">
                <input type="radio" name="role" value="Admin">
                Admin - Can delete members
            </label>
        </div>

        <a href="{% url 'members' %}" class="grey-button cancel-button">Cancel</a>
        <button type="submit" class="save-button">Save</button>
    </form>
    <script>
        function formatPhoneNumber(input) {
            // Remove all non-digit characters
            let value = input.value.replace(/\D/g, '');
            
            // Limit to 10 digits
            value = value.substring(0, 10);
            
            // Format the number
            if (value.length >= 6) {
                value = `(${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6)}`;
            } else if (value.length >= 3) {
                value = `(${value.substring(0, 3)}) ${value.substring(3)}`;
            } else if (value.length > 0) {
                value = `(${value}`;
            }
            
            input.value = value;
        }

        function validateForm() {
            const phone = document.getElementById('phone').value;
            const phonePattern = /^\(\d{3}\)\s\d{3}-\d{4}$/;
            
            if (!phonePattern.test(phone)) {
                alert('Please enter a valid phone number in the format (XXX) XXX-XXXX');
                return false;
            }
            return true;
        }
    </script>
{% endblock %}